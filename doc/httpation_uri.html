<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>Module httpation_uri</title>
<link rel="stylesheet" type="text/css" href="stylesheet.css" title="EDoc">
</head>
<body bgcolor="white">
<div class="navbar"><a name="#navbar_top"></a><table width="100%" border="0" cellspacing="0" cellpadding="2" summary="navigation bar"><tr><td><a href="overview-summary.html" target="overviewFrame">Overview</a></td><td><a href="http://www.erlang.org/"><img src="erlang.png" align="right" border="0" alt="erlang logo"></a></td></tr></table></div>
<hr>

<h1>Module httpation_uri</h1>
<ul class="index"><li><a href="#description">Description</a></li><li><a href="#types">Data Types</a></li><li><a href="#index">Function Index</a></li><li><a href="#functions">Function Details</a></li></ul>   
Urilator: A URI handling function library.


<h2><a name="description">Description</a></h2><p>   
Urilator: A URI handling function library.</p>
  
   An ADT utility for URIs. Includes import, export and validation functions.
  
<h2><a name="types">Data Types</a></h2>

<h3 class="typedecl"><a name="type-qs">qs()</a></h3>
<p><tt>qs() = {Label::string(), Value::string()}</tt></p>


<h3 class="typedecl"><a name="type-uri">uri()</a></h3>
<p><tt>uri() = #uri{protocol = string(), username = string(), password = string(), hostname = [string()], port = default | <a href="inet.html#type-port_number">inet:port_number()</a>, path = [string()], qs = [<a href="#type-qs">qs()</a>], fragment = string(), original = string()}</tt></p>


<h2><a name="index">Function Index</a></h2>
<table width="100%" border="1" cellspacing="0" cellpadding="2" summary="function index"><tr><td valign="top"><a href="#check_custom_port-2">check_custom_port/2</a></td><td>  
Accepts a Scheme and Port argument, and returns the scheme plus a custom  
port number, or the scheme and the atom 'default'.</td></tr>
<tr><td valign="top"><a href="#construct_uri-2">construct_uri/2</a></td><td>
  Accept a URI string and a proplist of default query values, and return
  a normalized URI string, incorporating the default query values.</td></tr>
<tr><td valign="top"><a href="#drop_qs-2">drop_qs/2</a></td><td>
  Accept a label and a URI, and drop the query indicated by the label, if it
  exists.</td></tr>
<tr><td valign="top"><a href="#export-1">export/1</a></td><td>
  Accept a URI datatype and export a URI-safe encoded string.</td></tr>
<tr><td valign="top"><a href="#hostname-1">hostname/1</a></td><td>
  Accept a URI datatype and return the hostname.</td></tr>
<tr><td valign="top"><a href="#hostname-2">hostname/2</a></td><td>
  Accept a hostname and a URI, and return the URI updated with the new hostname.</td></tr>
<tr><td valign="top"><a href="#new-0">new/0</a></td><td>
  Create a new, blank URI structure.</td></tr>
<tr><td valign="top"><a href="#new-1">new/1</a></td><td>
  Accept a URI as a string and return a urilator:uri() structure.</td></tr>
<tr><td valign="top"><a href="#pack_uri-5">pack_uri/5</a></td><td>
  Build an iolist from typed URI elements.</td></tr>
<tr><td valign="top"><a href="#password-1">password/1</a></td><td>
  Accept a URI datatype and return the password.</td></tr>
<tr><td valign="top"><a href="#password-2">password/2</a></td><td>
  Accept a password and a URI, and return the URI updated with the new password.</td></tr>
<tr><td valign="top"><a href="#path-1">path/1</a></td><td>
  Accept a URI datatype and return the path as a string.</td></tr>
<tr><td valign="top"><a href="#path-2">path/2</a></td><td>
  Accept a path and a URI, and return the URI updated with the new path.</td></tr>
<tr><td valign="top"><a href="#port-1">port/1</a></td><td>
  Accept a URI datatype and return the port or <code>default</code> if it is undefined.</td></tr>
<tr><td valign="top"><a href="#port-2">port/2</a></td><td>
  Accept a port number and a URI, and return the URI updated with the
  new port.</td></tr>
<tr><td valign="top"><a href="#protocol-1">protocol/1</a></td><td>
  Accept a URI datatype and return the protocol.</td></tr>
<tr><td valign="top"><a href="#protocol-2">protocol/2</a></td><td>
  Accept a protocol label and a URI, and return the URI updated with the
  new protocol.</td></tr>
<tr><td valign="top"><a href="#qs-1">qs/1</a></td><td>
  Accept a URI datatype and return its list of queries.</td></tr>
<tr><td valign="top"><a href="#qs-2">qs/2</a></td><td>
  Accept a list of queries and a URI, and return the URI updated with the
  new queries, replacing all of the original ones.</td></tr>
<tr><td valign="top"><a href="#update_qs-3">update_qs/3</a></td><td>
  Accept a Label, Value and a URI, upsert the query indicated by the label,
  and return the new URI.</td></tr>
<tr><td valign="top"><a href="#username-1">username/1</a></td><td>
  Accept a URI datatype and return the username.</td></tr>
<tr><td valign="top"><a href="#username-2">username/2</a></td><td>
  Accept a username and a URI, and return the URI updated with the new username.</td></tr>
</table>

<h2><a name="functions">Function Details</a></h2>

<h3 class="function"><a name="check_custom_port-2">check_custom_port/2</a></h3>
<div class="spec">
<p><tt>check_custom_port(Scheme, Port) -&gt; Result</tt>
<ul class="definitions"><li><tt>Scheme = <a href="http_uri.html#type-scheme">http_uri:scheme()</a></tt></li><li><tt>Port = pos_integer()</tt></li><li><tt>Result = {Scheme, MaybePort}</tt></li><li><tt>MaybePort = Port | default</tt></li></ul></p>
</div><p><p>  
Accepts a Scheme and Port argument, and returns the scheme plus a custom  
port number, or the scheme and the atom 'default'.</p>
 
  Output of this function is consumed by format_uri/5.</p>
<p><b>See also:</b> <a href="urilator.html#format_uri-5">urilator:format_uri/5</a>.</p>

<h3 class="function"><a name="construct_uri-2">construct_uri/2</a></h3>
<div class="spec">
<p><tt>construct_uri(UriString, Defaults) -&gt; Result</tt>
<ul class="definitions"><li><tt>UriString = string()</tt></li><li><tt>Defaults = [<a href="#type-qs">qs()</a>]</tt></li><li><tt>Result = {ok, <a href="#type-uri">uri()</a>} | {error, bad_uri}</tt></li></ul></p>
</div><p>
  Accept a URI string and a proplist of default query values, and return
  a normalized URI string, incorporating the default query values.</p>

<h3 class="function"><a name="drop_qs-2">drop_qs/2</a></h3>
<div class="spec">
<p><tt>drop_qs(Label, URI) -&gt; NewURI</tt>
<ul class="definitions"><li><tt>Label = string()</tt></li><li><tt>URI = <a href="#type-uri">uri()</a></tt></li><li><tt>NewURI = <a href="#type-uri">uri()</a></tt></li></ul></p>
</div><p>
  Accept a label and a URI, and drop the query indicated by the label, if it
  exists.</p>

<h3 class="function"><a name="export-1">export/1</a></h3>
<div class="spec">
<p><tt>export(URI) -&gt; String</tt>
<ul class="definitions"><li><tt>URI = <a href="#type-uri">uri()</a></tt></li><li><tt>String = string()</tt></li></ul></p>
</div><p>
  Accept a URI datatype and export a URI-safe encoded string.
  FIXME: This currently returns an unsafe URI.</p>

<h3 class="function"><a name="hostname-1">hostname/1</a></h3>
<div class="spec">
<p><tt>hostname(URI) -&gt; Hostname</tt>
<ul class="definitions"><li><tt>URI = <a href="#type-uri">uri()</a></tt></li><li><tt>Hostname = string()</tt></li></ul></p>
</div><p>
  Accept a URI datatype and return the hostname.</p>

<h3 class="function"><a name="hostname-2">hostname/2</a></h3>
<div class="spec">
<p><tt>hostname(String, URI) -&gt; NewURI</tt>
<ul class="definitions"><li><tt>String = string()</tt></li><li><tt>URI = <a href="#type-uri">uri()</a></tt></li><li><tt>NewURI = <a href="#type-uri">uri()</a></tt></li></ul></p>
</div><p>
  Accept a hostname and a URI, and return the URI updated with the new hostname.
  FIXME: Currently accepts invalid input and performs no IDN conversions.</p>

<h3 class="function"><a name="new-0">new/0</a></h3>
<div class="spec">
<p><tt>new() -&gt; <a href="#type-uri">uri()</a></tt><br></p>
</div><p>
  Create a new, blank URI structure.</p>

<h3 class="function"><a name="new-1">new/1</a></h3>
<div class="spec">
<p><tt>new(URI) -&gt; Result</tt>
<ul class="definitions"><li><tt>URI = string()</tt></li><li><tt>Result = {ok, <a href="#type-uri">uri()</a>} | {error, Reason}</tt></li><li><tt>Reason = not_a_string | Segment</tt></li><li><tt>Segment = atom()</tt></li></ul></p>
</div><p>
  Accept a URI as a string and return a urilator:uri() structure.
  If the input string is not a valid URI <code>{error, FunName, Args}</code> is returned.</p>

<h3 class="function"><a name="pack_uri-5">pack_uri/5</a></h3>
<div class="spec">
<p><tt>pack_uri(SchemePort, User, Host, Path, Query) -&gt; Result</tt>
<ul class="definitions"><li><tt>SchemePort = {<a href="http_uri.html#type-scheme">http_uri:scheme()</a>, Port}</tt></li><li><tt>Port = pos_integer() | default</tt></li><li><tt>User = <a href="http_uri.html#type-user_info">http_uri:user_info()</a></tt></li><li><tt>Host = <a href="http_uri.html#type-host">http_uri:host()</a></tt></li><li><tt>Path = <a href="http_uri.html#type-path">http_uri:path()</a></tt></li><li><tt>Query = [{Key::string(), Value::string()}]</tt></li><li><tt>Result = iolist()</tt></li></ul></p>
</div><p>
  Build an iolist from typed URI elements.</p>

<h3 class="function"><a name="password-1">password/1</a></h3>
<div class="spec">
<p><tt>password(URI) -&gt; Password</tt>
<ul class="definitions"><li><tt>URI = <a href="#type-uri">uri()</a></tt></li><li><tt>Password = string()</tt></li></ul></p>
</div><p>
  Accept a URI datatype and return the password.</p>

<h3 class="function"><a name="password-2">password/2</a></h3>
<div class="spec">
<p><tt>password(String, URI) -&gt; NewURI</tt>
<ul class="definitions"><li><tt>String = string()</tt></li><li><tt>URI = <a href="#type-uri">uri()</a></tt></li><li><tt>NewURI = <a href="#type-uri">uri()</a></tt></li></ul></p>
</div><p>
  Accept a password and a URI, and return the URI updated with the new password.</p>

<h3 class="function"><a name="path-1">path/1</a></h3>
<div class="spec">
<p><tt>path(URI) -&gt; Path</tt>
<ul class="definitions"><li><tt>URI = <a href="#type-uri">uri()</a></tt></li><li><tt>Path = string()</tt></li></ul></p>
</div><p>
  Accept a URI datatype and return the path as a string.</p>

<h3 class="function"><a name="path-2">path/2</a></h3>
<div class="spec">
<p><tt>path(Path, URI) -&gt; NewURI</tt>
<ul class="definitions"><li><tt>Path = string()</tt></li><li><tt>URI = <a href="#type-uri">uri()</a></tt></li><li><tt>NewURI = <a href="#type-uri">uri()</a></tt></li></ul></p>
</div><p>
  Accept a path and a URI, and return the URI updated with the new path.
  FIXME: This currently accepts invalid input and could return an invalid
         result in certain cases.</p>

<h3 class="function"><a name="port-1">port/1</a></h3>
<div class="spec">
<p><tt>port(URI) -&gt; Port</tt>
<ul class="definitions"><li><tt>URI = <a href="#type-uri">uri()</a></tt></li><li><tt>Port = default | <a href="inet.html#type-port_number">inet:port_number()</a></tt></li></ul></p>
</div><p>
  Accept a URI datatype and return the port or <code>default</code> if it is undefined.</p>

<h3 class="function"><a name="port-2">port/2</a></h3>
<div class="spec">
<p><tt>port(Port, URI) -&gt; NewURI</tt>
<ul class="definitions"><li><tt>Port = default | <a href="inet.html#type-port_number">inet:port_number()</a></tt></li><li><tt>URI = <a href="#type-uri">uri()</a></tt></li><li><tt>NewURI = <a href="#type-uri">uri()</a></tt></li></ul></p>
</div><p>
  Accept a port number and a URI, and return the URI updated with the
  new port.</p>

<h3 class="function"><a name="protocol-1">protocol/1</a></h3>
<div class="spec">
<p><tt>protocol(URI) -&gt; Protocol</tt>
<ul class="definitions"><li><tt>URI = <a href="#type-uri">uri()</a></tt></li><li><tt>Protocol = string()</tt></li></ul></p>
</div><p>
  Accept a URI datatype and return the protocol.</p>

<h3 class="function"><a name="protocol-2">protocol/2</a></h3>
<div class="spec">
<p><tt>protocol(String, URI) -&gt; NewURI</tt>
<ul class="definitions"><li><tt>String = string()</tt></li><li><tt>URI = <a href="#type-uri">uri()</a></tt></li><li><tt>NewURI = <a href="#type-uri">uri()</a></tt></li></ul></p>
</div><p>
  Accept a protocol label and a URI, and return the URI updated with the
  new protocol.
  FIXME: Will currently accept any invalid input -- should only accept [:alpha:]</p>

<h3 class="function"><a name="qs-1">qs/1</a></h3>
<div class="spec">
<p><tt>qs(URI) -&gt; Queries</tt>
<ul class="definitions"><li><tt>URI = <a href="#type-uri">uri()</a></tt></li><li><tt>Queries = [<a href="#type-qs">qs()</a>]</tt></li></ul></p>
</div><p>
  Accept a URI datatype and return its list of queries.</p>

<h3 class="function"><a name="qs-2">qs/2</a></h3>
<div class="spec">
<p><tt>qs(Queries, URI) -&gt; NewURI</tt>
<ul class="definitions"><li><tt>Queries = [<a href="#type-qs">qs()</a>]</tt></li><li><tt>URI = <a href="#type-uri">uri()</a></tt></li><li><tt>NewURI = <a href="#type-uri">uri()</a></tt></li></ul></p>
</div><p>
  Accept a list of queries and a URI, and return the URI updated with the
  new queries, replacing all of the original ones.</p>

<h3 class="function"><a name="update_qs-3">update_qs/3</a></h3>
<div class="spec">
<p><tt>update_qs(Label, Value, URI) -&gt; NewURI</tt>
<ul class="definitions"><li><tt>Label = string()</tt></li><li><tt>Value = string()</tt></li><li><tt>URI = <a href="#type-uri">uri()</a></tt></li><li><tt>NewURI = <a href="#type-uri">uri()</a></tt></li></ul></p>
</div><p>
  Accept a Label, Value and a URI, upsert the query indicated by the label,
  and return the new URI.</p>

<h3 class="function"><a name="username-1">username/1</a></h3>
<div class="spec">
<p><tt>username(URI) -&gt; Username</tt>
<ul class="definitions"><li><tt>URI = <a href="#type-uri">uri()</a></tt></li><li><tt>Username = string()</tt></li></ul></p>
</div><p>
  Accept a URI datatype and return the username.</p>

<h3 class="function"><a name="username-2">username/2</a></h3>
<div class="spec">
<p><tt>username(String, URI) -&gt; NewURI</tt>
<ul class="definitions"><li><tt>String = string()</tt></li><li><tt>URI = <a href="#type-uri">uri()</a></tt></li><li><tt>NewURI = <a href="#type-uri">uri()</a></tt></li></ul></p>
</div><p>
  Accept a username and a URI, and return the URI updated with the new username.</p>
<hr>

<div class="navbar"><a name="#navbar_bottom"></a><table width="100%" border="0" cellspacing="0" cellpadding="2" summary="navigation bar"><tr><td><a href="overview-summary.html" target="overviewFrame">Overview</a></td><td><a href="http://www.erlang.org/"><img src="erlang.png" align="right" border="0" alt="erlang logo"></a></td></tr></table></div>
<p><i>Generated by EDoc, Dec 3 2016, 22:22:58.</i></p>
</body>
</html>
